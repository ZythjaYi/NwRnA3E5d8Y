# 1.1.数据收集-收听次数权重计算

## 1.1 单曲推荐（an_m_n、an_m_a_t）

### 单曲已收听次数 an_m_n（annotation_mediafile_num）
- **定义**：当前用户对单曲的收听次数。
- **公式**：设 \( U \) 为当前用户，\( M \) 为单曲集合，\( an\_m\_n \) 表示用户 \( U \) 对单曲 \( m \) 的收听次数。
  \[
  an\_m\_n = \sum_{m \in M} \text{收听次数}(U, m)
  \]

### 单曲已收听总时长 an_m_a_t（annotation_mediafile_all_time）
- **定义**：当前用户对单曲的收听总时长。
- **公式**：设 \( U \) 为当前用户，\( M \) 为单曲集合，\( T \) 为收听时长，\( an\_m\_a\_t \) 表示用户 \( U \) 对单曲 \( m \) 的收听总时长。
  \[
  an\_m\_a\_t = \sum_{m \in M} \text{收听时长}(U, m) \times T
  \]

## 1.2 专辑推荐（an_am_a_m_n、an_am_a_m_a_t）

### 专辑内已经收听过的所有歌曲收听总次数 an_am_a_m_n（annotation_album_all_mediafile_num）
- **定义**：当前用户对专辑内所有歌曲的收听总次数。
- **公式**：设 \( U \) 为当前用户，\( A \) 为专辑集合，\( M \) 为专辑内的单曲集合，\( an\_am\_a\_m\_n \) 表示用户 \( U \) 对专辑 \( a \) 内所有歌曲的收听总次数。
  \[
  an\_am\_a\_m\_n = \sum_{a \in A} \sum_{m \in M} \text{收听次数}(U, m)
  \]

### 专辑内已经收听过的所有歌曲收听总时长 an_am_a_m_a_t（annotation_album_all_mediafile_all_time）
- **定义**：当前用户对专辑内所有歌曲的收听总时长。
- **公式**：设 \( U \) 为当前用户，\( A \) 为专辑集合，\( M \) 为专辑内的单曲集合，\( T \) 为收听时长，\( an\_am\_a\_m\_a\_t \) 表示用户 \( U \) 对专辑 \( a \) 内所有歌曲的收听总时长。
  \[
  an\_am\_a\_m\_a\_t = \sum_{a \in A} \sum_{m \in M} \text{收听时长}(U, m) \times T
  \]

## 1.3 艺术家推荐

艺术家推荐是单曲推荐和专辑推荐的混合推荐，结合了当前用户对单曲和专辑的收听行为。

### 混合推荐公式
- **定义**：综合单曲推荐和专辑推荐的结果，生成艺术家推荐。
- **公式**：设 \( \alpha \) 和 \( \beta \) 为权重系数，分别表示单曲推荐和专辑推荐的权重，\( R \) 为推荐结果。
  \[
  R = \alpha \times an\_m\_n + \beta \times an\_am\_a\_m\_n + \alpha \times an\_m\_a\_t + \beta \times an\_am\_a\_m\_a\_t
  \]
  其中，\( \alpha + \beta = 1 \)。

通过以上数学建模，可以量化当前用户对单曲、专辑和艺术家的喜好程度，为个性化推荐提供数据支持。